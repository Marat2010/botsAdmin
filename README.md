# botsAdmin
## Администратор ТГ ботов


**Папки:**  
- **"Prodamus"** - сервис оплаты.  

  _Сделано:_  
  - **формирование ссылки на оплату (файл "payment_link.py").**  
    Основные данные это:
      - URL платежной формы (linktoform)  
      - Словарь "data" . Информация об заказе, клиенте, продукте, и три ссылки:
        - для уведомления об успешной оплате.
        - для возврата клиента при успешной оплате
        - для возврата клиента без оплаты.
      Из файла убраны все утилиты для формирования ссылки в файл "utils_prodamus.py" 
  - **Уведомление об успешной оплате (файл "payment_verification.py")**    
    _Порядок проверки:_  
      - Запускаем сервер aiohttp (python payment_verification.py) для принятия уведомлений об оплате.  
      - Запускаем формирование ссылки на оплату (python payment_link.py)
      - Переход по сформированной ссылки.
      - Производим оплату на сайте продамуса. Должно перебросить на соответсвующую страницу.
      - Проверяем сообщения на сервере об оплате, и совпадения подписей.  
       
    Некоторые моменты.  
      - Из файла также убраны все утилиты для формирования подписи в файл "utils_prodamus.py".  
      - Чтобы данные приходили к нам в формате json, не забывать при формирования ссылки в словаре "data"
    выставлять параметр **'callbackType': 'json'**
      - Также не забывать убрать демо режим **'demo_mode': 1**
      - Подготовлен файл "payment_verification.service", чтобы вешать запуск сервера aiohttp как сервис на VPS.   

  _Необходимо:_
   - **Заносить данные в БД об успешной оплате**
   - Сделать подгрузку переменных окружения через settings Pydantic  
   - Продумать куда дальше боту, ботам отправлять уведомления  


- **"Multibot"** - управление ботами.  

  _Сделано:_  
  - Запуск добавление бота (Если повторно, то не дает)
  - Запуск Redis у себя пока локально, можно сделать в докере 
  
  _Необходимо:_
   - ...


- **"Auth"** - все, что касается авторизации.  
    _Сделано:_
  - Переведен на вебхук.
  
